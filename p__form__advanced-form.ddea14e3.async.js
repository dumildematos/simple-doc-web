(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[8529],{34540:function(re,W,r){"use strict";var N=r(22122),b=r(28991),$=r(81253),g=r(67294),G=r(62404),p=r(86190),S=r(66758),J=["fieldProps","proFieldProps"],V="dateRange",U=g.forwardRef(function(K,y){var j=K.fieldProps,C=K.proFieldProps,l=(0,$.Z)(K,J),n=(0,g.useContext)(S.Z);return g.createElement(G.Z,(0,N.Z)({ref:y,mode:"edit",fieldProps:(0,b.Z)({getPopupContainer:n.getPopupContainer},j),valueType:V,proFieldProps:C,filedConfig:{valueType:V,lightFilterLabelFormatter:function(m){return(0,p.Z)(m,(j==null?void 0:j.format)||"YYYY-MM-DD")}}},l))});W.Z=U},64317:function(re,W,r){"use strict";var N=r(22122),b=r(28991),$=r(81253),g=r(67294),G=r(62404),p=r(22270),S=r(66758),J=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],V=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],U=g.forwardRef(function(l,n){var M=l.fieldProps,m=l.children,w=l.params,k=l.proFieldProps,te=l.mode,q=l.valueEnum,ne=l.request,ae=l.showSearch,_=l.options,le=(0,$.Z)(l,J),oe=(0,g.useContext)(S.Z);return g.createElement(G.Z,(0,N.Z)({mode:"edit",valueEnum:(0,p.h)(q),request:ne,params:w,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,b.Z)({options:_,mode:te,showSearch:ae,getPopupContainer:oe.getPopupContainer},M),ref:n,proFieldProps:k},le),m)}),K=g.forwardRef(function(l,n){var M=l.fieldProps,m=l.children,w=l.params,k=l.proFieldProps,te=l.mode,q=l.valueEnum,ne=l.request,ae=l.options,_=(0,$.Z)(l,V),le=(0,b.Z)({options:ae,mode:te||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},M),oe=(0,g.useContext)(S.Z);return g.createElement(G.Z,(0,N.Z)({mode:"edit",valueEnum:(0,p.h)(q),request:ne,params:w,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,b.Z)({getPopupContainer:oe.getPopupContainer},le),ref:n,proFieldProps:k},_),m)}),y=U,j=K,C=y;C.SearchSelect=j,C.displayName="ProFormComponent",W.Z=C},5966:function(re,W,r){"use strict";var N=r(22122),b=r(81253),$=r(67294),g=r(62404),G=["fieldProps","proFieldProps"],p=["fieldProps","proFieldProps"],S="text",J=function(y){var j=y.fieldProps,C=y.proFieldProps,l=(0,b.Z)(y,G);return $.createElement(g.Z,(0,N.Z)({mode:"edit",valueType:S,fieldProps:j,filedConfig:{valueType:S},proFieldProps:C},l))},V=function(y){var j=y.fieldProps,C=y.proFieldProps,l=(0,b.Z)(y,p);return $.createElement(g.Z,(0,N.Z)({mode:"edit",valueType:"password",fieldProps:j,proFieldProps:C,filedConfig:{valueType:S}},l))},U=J;U.Password=V,U.displayName="ProFormComponent",W.Z=U},5393:function(re){re.exports={card:"card___1dsH6",errorIcon:"errorIcon___3jptF",anticon:"anticon___A0Hdx",errorPopover:"errorPopover___FGjVx",errorListItem:"errorListItem___1rmVg",errorField:"errorField___2Y7eW",editable:"editable___WRDur"}},79969:function(re,W,r){"use strict";r.r(W),r.d(W,{default:function(){return er}});var N=r(58024),b=r(39144),$=r(13062),g=r(71230),G=r(89032),p=r(15746),S=r(34792),J=r(48086),V=r(3182),U=r(20136),K=r(55241),y=r(2824),j=r(94043),C=r.n(j),l=r(73218),n=r(67294),M=r(22122),m=r(28991),w=r(81253),k=r(62404),te=r(86190),q=r(66758),ne=["fieldProps","proFieldProps"],ae=["fieldProps","proFieldProps"],_="time",le=n.forwardRef(function(e,c){var x=e.fieldProps,E=e.proFieldProps,B=(0,w.Z)(e,ne),H=(0,n.useContext)(q.Z);return n.createElement(k.Z,(0,M.Z)({ref:c,mode:"edit",fieldProps:(0,m.Z)({getPopupContainer:H.getPopupContainer},x),valueType:"timeRange",proFieldProps:E,filedConfig:{valueType:"timeRange",lightFilterLabelFormatter:function(I){return(0,te.Z)(I,"HH:mm:SS")}}},B))}),oe=function(c){var x=c.fieldProps,E=c.proFieldProps,B=(0,w.Z)(c,ae),H=(0,n.useContext)(q.Z);return n.createElement(k.Z,(0,M.Z)({mode:"edit",fieldProps:(0,m.Z)({getPopupContainer:H.getPopupContainer},x),valueType:_,proFieldProps:E,filedConfig:{customLightMode:!0,valueType:_}},B))},pe=oe;pe.RangePicker=le;var De=pe,he=r(952),de=r(5966),ee=r(64317),be=r(34540),cr=r(9715),je=r(86835),fr=r(57663),Be=r(71577),Me=r(96156),Ie=r(28481),Ae=r(87757),Pe=r.n(Ae),Oe=r(92137),Le=r(21770),Se=r(49101),Ve=r(26369),ge=r(22270),Ke=r(48171),We=r(60249),Ne=r(48526),$e=r(55059),Ue=r(97462),we=r(88306),Ee=r(8880),Ye=["onTableChange","maxLength","formItemProps","recordCreatorProps","rowKey","controlled","defaultValue","onChange","editableFormRef"],He=["record","position","creatorButtonText","newRecordType","parentKey","style"],Fe=n.createContext(void 0);function Ze(e){var c=e.children,x=e.record,E=e.position,B=e.newRecordType,H=e.parentKey,O=(0,n.useContext)(Fe);return n.cloneElement(c,(0,m.Z)((0,m.Z)({},c.props),{},{onClick:function(){var I=(0,Oe.Z)(Pe().mark(function A(T){var Z,L,u,F;return Pe().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(Z=(L=c.props).onClick)===null||Z===void 0?void 0:Z.call(L,T);case 2:if(F=D.sent,F!==!1){D.next=5;break}return D.abrupt("return");case 5:O==null||(u=O.current)===null||u===void 0||u.addEditRecord(x,{position:E,newRecordType:B,parentKey:H});case 6:case"end":return D.stop()}},A)}));function ue(A){return I.apply(this,arguments)}return ue}()}))}function Ce(e){var c,x,E=e.onTableChange,B=e.maxLength,H=e.formItemProps,O=e.recordCreatorProps,I=e.rowKey,ue=e.controlled,A=e.defaultValue,T=e.onChange,Z=e.editableFormRef,L=(0,w.Z)(e,Ye),u=(0,Ve.Z)(e.value),F=(0,n.useRef)(),v=(0,n.useRef)();(0,n.useImperativeHandle)(L.actionRef,function(){return F.current});var D=(0,Le.Z)(function(){return e.value||A||[]},{value:e.value,onChange:e.onChange}),ye=(0,Ie.Z)(D,2),s=ye[0],rr=ye[1],z=n.useMemo(function(){return typeof I=="function"?I:function(f,a){return f[I]||a}},[I]),Re=function(a){if(typeof a=="number"&&!e.name){if(a>=s.length)return a;var i=s==null?void 0:s.at(a);return z==null?void 0:z(i,a)}if((typeof a=="string"||a>=s.length)&&e.name){var o=s.findIndex(function(d,h){var P;return(z==null||(P=z(d,h))===null||P===void 0?void 0:P.toString())===(a==null?void 0:a.toString())});return o}return a};(0,n.useImperativeHandle)(Z,function(){var f=function(o){var d,h;if(o==null)throw new Error("rowIndex is required");var P=Re(o),X=[e.name,(d=P==null?void 0:P.toString())!==null&&d!==void 0?d:""].flat(1).filter(Boolean);return(h=v.current)===null||h===void 0?void 0:h.getFieldValue(X)},a=function(){var o,d=[e.name].flat(1).filter(Boolean);if(Array.isArray(d)&&d.length===0){var h,P=(h=v.current)===null||h===void 0?void 0:h.getFieldsValue();return Array.isArray(P)?P:Object.keys(P).map(function(X){return P[X]})}return(o=v.current)===null||o===void 0?void 0:o.getFieldValue(d)};return(0,m.Z)((0,m.Z)({},v.current),{},{getRowData:f,getRowsData:a,setRowData:function(o,d){var h,P,X,ce;if(o==null)throw new Error("rowIndex is required");var fe=Re(o),sr=[e.name,(h=fe==null?void 0:fe.toString())!==null&&h!==void 0?h:""].flat(1).filter(Boolean),vr=((P=v.current)===null||P===void 0||(X=P.getFieldsValue)===null||X===void 0?void 0:X.call(P))||{},mr=(0,Ee.Z)(vr,sr,(0,m.Z)((0,m.Z)({},f(o)),d||{}));return(ce=v.current)===null||ce===void 0?void 0:ce.setFieldsValue(mr)}})}),(0,n.useEffect)(function(){!e.controlled||s.forEach(function(f,a){var i;(i=v.current)===null||i===void 0||i.setFieldsValue((0,Me.Z)({},z(f,a),f))},{})},[s,e.controlled]),(0,n.useEffect)(function(){if(e.name){var f;v.current=(f=e.editable)===null||f===void 0?void 0:f.form}},[(c=e.editable)===null||c===void 0?void 0:c.form,e.name]);var Q=O||{},tr=Q.record,ve=Q.position,nr=Q.creatorButtonText,ar=Q.newRecordType,lr=Q.parentKey,or=Q.style,ir=(0,w.Z)(Q,He),Te=ve==="top",ie=(0,n.useMemo)(function(){return B&&B<=(s==null?void 0:s.length)?!1:O!==!1&&n.createElement(Ze,{record:(0,ge.h)(tr,s==null?void 0:s.length,s)||{},position:ve,parentKey:(0,ge.h)(lr,s==null?void 0:s.length,s),newRecordType:ar},n.createElement(Be.Z,(0,M.Z)({type:"dashed",style:(0,m.Z)({display:"block",margin:"10px 0",width:"100%"},or),icon:n.createElement(Se.Z,null)},ir),nr||"\u6DFB\u52A0\u4E00\u884C\u6570\u636E"))},[O,B,s==null?void 0:s.length]),dr=(0,n.useMemo)(function(){return ie?Te?{components:{header:{wrapper:function(a){var i,o=a.className,d=a.children;return n.createElement("thead",{className:o},d,n.createElement("tr",{style:{position:"relative"}},n.createElement("td",{colSpan:0,style:{visibility:"hidden"}},ie),n.createElement("td",{style:{position:"absolute",left:0,width:"100%"},colSpan:(i=L.columns)===null||i===void 0?void 0:i.length},ie)))}}}}:{tableViewRender:function(a,i){var o,d;return n.createElement(n.Fragment,null,(o=(d=e.tableViewRender)===null||d===void 0?void 0:d.call(e,a,i))!==null&&o!==void 0?o:i,ie)}}:{}},[Te,ie]),me=(0,m.Z)({},e.editable),ur=(0,Ke.J)(function(f,a){var i,o,d;if((i=e.editable)===null||i===void 0||(o=i.onValuesChange)===null||o===void 0||o.call(i,f,a),(d=e.onValuesChange)===null||d===void 0||d.call(e,a,f),e.controlled){var h;e==null||(h=e.onChange)===null||h===void 0||h.call(e,a)}});return((e==null?void 0:e.onValuesChange)||((x=e.editable)===null||x===void 0?void 0:x.onValuesChange)||e.controlled&&(e==null?void 0:e.onChange))&&(me.onValuesChange=ur),n.createElement(n.Fragment,null,n.createElement(Fe.Provider,{value:F},n.createElement($e.Z,(0,M.Z)({search:!1,options:!1,pagination:!1,rowKey:I,revalidateOnFocus:!1},L,dr,{tableLayout:"fixed",actionRef:F,onChange:E,editable:(0,m.Z)((0,m.Z)({},me),{},{formProps:(0,m.Z)({formRef:v},me.formProps)}),dataSource:s,onDataSourceChange:function(a){if(rr(a),e.name&&ve==="top"){var i,o=(0,Ee.Z)({},[e.name].flat(1).filter(Boolean),a);(i=v.current)===null||i===void 0||i.setFieldsValue(o)}}}))),e.name?n.createElement(Ue.Z,{name:[e.name]},function(f){var a,i,o=(0,we.Z)(f,[e.name].flat(1)),d=o==null?void 0:o.find(function(h,P){return!(0,We.Z)(h,u==null?void 0:u[P])});return d&&(e==null||(a=e.editable)===null||a===void 0||(i=a.onValuesChange)===null||i===void 0||i.call(a,d,o)),null}):null)}function xe(e){return e.name?n.createElement(je.Z.Item,(0,M.Z)({style:{maxWidth:"100%"}},e==null?void 0:e.formItemProps,{name:e.name}),n.createElement(Ne.gN,{shouldUpdate:!0,name:e.name,isList:!0},function(c,x,E){return n.createElement(Ce,(0,M.Z)({},e,{editable:(0,m.Z)((0,m.Z)({},e.editable),{},{form:E}),value:c.value||[],onChange:c.onChange}))})):n.createElement(Ce,e)}xe.RecordCreator=Ze;var Ge=xe,Je=r(85224),ze=r(75362),Qe=r(21010);function Xe(e){return se.apply(this,arguments)}function se(){return se=(0,V.Z)(C().mark(function e(c){return C().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.abrupt("return",(0,Qe.WY)("/api/advancedForm",{method:"POST",data:c}));case 1:case"end":return E.stop()}},e)})),se.apply(this,arguments)}var ke=r(5393),Y=r.n(ke),t=r(85893),R={name:"\u4ED3\u5E93\u540D",url:"\u4ED3\u5E93\u57DF\u540D",owner:"\u4ED3\u5E93\u7BA1\u7406\u5458",approver:"\u5BA1\u6279\u4EBA",dateRange:"\u751F\u6548\u65E5\u671F",type:"\u4ED3\u5E93\u7C7B\u578B",name2:"\u4EFB\u52A1\u540D",url2:"\u4EFB\u52A1\u63CF\u8FF0",owner2:"\u6267\u884C\u4EBA",approver2:"\u8D23\u4EFB\u4EBA",dateRange2:"\u751F\u6548\u65E5\u671F",type2:"\u4EFB\u52A1\u7C7B\u578B"},qe=[{key:"1",workId:"00001",name:"John Brown",department:"New York No. 1 Lake Park"},{key:"2",workId:"00002",name:"Jim Green",department:"London No. 1 Lake Park"},{key:"3",workId:"00003",name:"Joe Black",department:"Sidney No. 1 Lake Park"}],_e=function(){var c=(0,n.useState)([]),x=(0,y.Z)(c,2),E=x[0],B=x[1],H=function(T){var Z=T.filter(function(F){return F.errors.length>0}).length;if(!T||Z===0)return null;var L=function(v){var D=document.querySelector('label[for="'.concat(v,'"]'));D&&D.scrollIntoView(!0)},u=T.map(function(F){if(!F||F.errors.length===0)return null;var v=F.name[0];return(0,t.jsxs)("li",{className:Y().errorListItem,onClick:function(){return L(v)},children:[(0,t.jsx)(l.Z,{className:Y().errorIcon}),(0,t.jsx)("div",{className:Y().errorMessage,children:F.errors[0]}),(0,t.jsx)("div",{className:Y().errorField,children:R[v]})]},v)});return(0,t.jsxs)("span",{className:Y().errorIcon,children:[(0,t.jsx)(K.Z,{title:"\u8868\u5355\u6821\u9A8C\u4FE1\u606F",content:u,overlayClassName:Y().errorPopover,trigger:"click",getPopupContainer:function(v){return v&&v.parentNode?v.parentNode:v},children:(0,t.jsx)(l.Z,{})}),Z]})},O=function(){var A=(0,V.Z)(C().mark(function T(Z){return C().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return B([]),u.prev=1,u.next=4,Xe(Z);case 4:J.default.success("\u63D0\u4EA4\u6210\u529F"),u.next=9;break;case 7:u.prev=7,u.t0=u.catch(1);case 9:case"end":return u.stop()}},T,null,[[1,7]])}));return function(Z){return A.apply(this,arguments)}}(),I=function(T){B(T.errorFields)},ue=[{title:"\u6210\u5458\u59D3\u540D",dataIndex:"name",key:"name",width:"20%"},{title:"\u5DE5\u53F7",dataIndex:"workId",key:"workId",width:"20%"},{title:"\u6240\u5C5E\u90E8\u95E8",dataIndex:"department",key:"department",width:"40%"},{title:"\u64CD\u4F5C",key:"action",valueType:"option",render:function(T,Z,L,u){return[(0,t.jsx)("a",{onClick:function(){u==null||u.startEditable(Z.key)},children:"\u7F16\u8F91"},"eidit")]}}];return(0,t.jsx)(he.ZP,{layout:"vertical",hideRequiredMark:!0,submitter:{render:function(T,Z){return(0,t.jsxs)(Je.Z,{children:[H(E),Z]})}},initialValues:{members:qe},onFinish:O,onFinishFailed:I,children:(0,t.jsxs)(ze.ZP,{content:"\u9AD8\u7EA7\u8868\u5355\u5E38\u89C1\u4E8E\u4E00\u6B21\u6027\u8F93\u5165\u548C\u63D0\u4EA4\u5927\u6279\u91CF\u6570\u636E\u7684\u573A\u666F\u3002",children:[(0,t.jsxs)(b.Z,{title:"\u4ED3\u5E93\u7BA1\u7406",className:Y().card,bordered:!1,children:[(0,t.jsxs)(g.Z,{gutter:16,children:[(0,t.jsx)(p.Z,{lg:6,md:12,sm:24,children:(0,t.jsx)(de.Z,{label:R.name,name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u4ED3\u5E93\u540D\u79F0"}],placeholder:"\u8BF7\u8F93\u5165\u4ED3\u5E93\u540D\u79F0"})}),(0,t.jsx)(p.Z,{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24,children:(0,t.jsx)(de.Z,{label:R.url,name:"url",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}],fieldProps:{style:{width:"100%"},addonBefore:"http://",addonAfter:".com"},placeholder:"\u8BF7\u8F93\u5165"})}),(0,t.jsx)(p.Z,{xl:{span:8,offset:2},lg:{span:10},md:{span:24},sm:24,children:(0,t.jsx)(ee.Z,{label:R.owner,name:"owner",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7BA1\u7406\u5458"}],options:[{label:"\u4ED8\u6653\u6653",value:"xiao"},{label:"\u5468\u6BDB\u6BDB",value:"mao"}],placeholder:"\u8BF7\u9009\u62E9\u7BA1\u7406\u5458"})})]}),(0,t.jsxs)(g.Z,{gutter:16,children:[(0,t.jsx)(p.Z,{lg:6,md:12,sm:24,children:(0,t.jsx)(ee.Z,{label:R.approver,name:"approver",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5BA1\u6279\u5458"}],options:[{label:"\u4ED8\u6653\u6653",value:"xiao"},{label:"\u5468\u6BDB\u6BDB",value:"mao"}],placeholder:"\u8BF7\u9009\u62E9\u5BA1\u6279\u5458"})}),(0,t.jsx)(p.Z,{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24,children:(0,t.jsx)(be.Z,{label:R.dateRange,name:"dateRange",fieldProps:{style:{width:"100%"}},rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u751F\u6548\u65E5\u671F"}]})}),(0,t.jsx)(p.Z,{xl:{span:8,offset:2},lg:{span:10},md:{span:24},sm:24,children:(0,t.jsx)(ee.Z,{label:R.type,name:"type",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4ED3\u5E93\u7C7B\u578B"}],options:[{label:"\u79C1\u5BC6",value:"private"},{label:"\u516C\u5F00",value:"public"}],placeholder:"\u8BF7\u9009\u62E9\u4ED3\u5E93\u7C7B\u578B"})})]})]}),(0,t.jsxs)(b.Z,{title:"\u4EFB\u52A1\u7BA1\u7406",className:Y().card,bordered:!1,children:[(0,t.jsxs)(g.Z,{gutter:16,children:[(0,t.jsx)(p.Z,{lg:6,md:12,sm:24,children:(0,t.jsx)(de.Z,{label:R.name2,name:"name2",rules:[{required:!0,message:"\u8BF7\u8F93\u5165"}]})}),(0,t.jsx)(p.Z,{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24,children:(0,t.jsx)(de.Z,{label:R.url2,name:"url2",rules:[{required:!0,message:"\u8BF7\u9009\u62E9"}]})}),(0,t.jsx)(p.Z,{xl:{span:8,offset:2},lg:{span:10},md:{span:24},sm:24,children:(0,t.jsx)(ee.Z,{label:R.owner2,name:"owner2",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7BA1\u7406\u5458"}],options:[{label:"\u4ED8\u6653\u6653",value:"xiao"},{label:"\u5468\u6BDB\u6BDB",value:"mao"}]})})]}),(0,t.jsxs)(g.Z,{gutter:16,children:[(0,t.jsx)(p.Z,{lg:6,md:12,sm:24,children:(0,t.jsx)(ee.Z,{label:R.approver2,name:"approver2",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5BA1\u6279\u5458"}],options:[{label:"\u4ED8\u6653\u6653",value:"xiao"},{label:"\u5468\u6BDB\u6BDB",value:"mao"}],placeholder:"\u8BF7\u9009\u62E9\u5BA1\u6279\u5458"})}),(0,t.jsx)(p.Z,{xl:{span:6,offset:2},lg:{span:8},md:{span:12},sm:24,children:(0,t.jsx)(De,{label:R.dateRange2,name:"dateRange2",rules:[{required:!0,message:"\u8BF7\u8F93\u5165"}],placeholder:"\u63D0\u9192\u65F6\u95F4",fieldProps:{style:{width:"100%"}}})}),(0,t.jsx)(p.Z,{xl:{span:8,offset:2},lg:{span:10},md:{span:24},sm:24,children:(0,t.jsx)(ee.Z,{label:R.type2,name:"type2",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u4ED3\u5E93\u7C7B\u578B"}],options:[{label:"\u79C1\u5BC6",value:"private"},{label:"\u516C\u5F00",value:"public"}],placeholder:"\u8BF7\u9009\u62E9\u4ED3\u5E93\u7C7B\u578B"})})]})]}),(0,t.jsx)(b.Z,{title:"\u6210\u5458\u7BA1\u7406",bordered:!1,children:(0,t.jsx)(he.ZP.Item,{name:"members",children:(0,t.jsx)(Ge,{recordCreatorProps:{record:function(){return{key:"0".concat(Date.now())}}},columns:ue,rowKey:"key"})})})]})})},er=_e}}]);
